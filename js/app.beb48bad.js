(function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/spotifind/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0650":function(t,e,a){},"0c3b":function(t,e,a){t.exports=a.p+"img/spotify.30734286.png"},"0dc6":function(t,e,a){"use strict";a("7a22")},"0e18":function(t,e,a){"use strict";a("21e7")},"1ce8":function(t,e,a){},"21e7":function(t,e,a){},"23a3":function(t,e,a){"use strict";a("a929")},"25fb":function(t,e,a){},"3c52":function(t,e,a){"use strict";a("4d0c")},"49f5":function(t,e,a){},"4d0c":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"vm",(function(){return _e}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"page-wrapper"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view",{attrs:{name:"navPanel"}})],1),a("div",{staticClass:"content-wrapper"},[a("router-view"),a("transition",{attrs:{name:"fade"}},[t.$store.state.markerFound?t._e():a("svg",{attrs:{width:"160",height:"160",viewBox:"0 0 160 160",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M34 2H2V34",stroke:"white","stroke-width":"4"}}),a("path",{attrs:{d:"M126 158H158V126",stroke:"white","stroke-width":"4"}})])])],1)],1)])},s=[],i=(a("4de4"),a("a15b"),a("d81d"),a("b0c0"),a("4fad"),a("b85c")),o=a("3835"),c=(a("96cf"),a("1da1")),u=a("bc3a"),l=a.n(u);a("4160"),a("fb6a"),a("ac1f"),a("1276"),a("159b");function d(t){window.localStorage.setItem("recommendations_data",JSON.stringify({filters:t.state.filters,recommendations:t.state.recommendations,active_track:t.state.activeTrack,genres:t.state.selected_genres}))}a("d3b7");var p=a("2f62");n["a"].use(p["a"]);var m=new p["a"].Store({strict:!0,state:{foundResults:null,activeTrack:{},loading:{search:!1,recs:!1},recommendations:null,searchInputFocused:!1,genres:[],selected_genres:null,filters:null,logged:!1,isDefaultPlaylist:!1,markerFound:!1},mutations:{updateMarkerState:function(t,e){t.markerFound=e},updateResults:function(t,e){t.foundResults=e},setFilterValuesByKey:function(t,e){var a=e.key,n=e.value;t.filters[a].value=parseFloat(n)},setFilterValues:function(t,e){t.filters=e},changeFilterState:function(t,e){var a=Object(o["a"])(e,2),n=a[0],r=a[1];t.filters[n].enabled=r},chooseActiveTrack:function(t,e){t.activeTrack=e},changeLoadingState:function(t,e){var a=e.component,n=e.isLoading;t.loading[a]=n},updateRecommendations:function(t,e){t.recommendations=e},searchInputFocus:function(t,e){t.searchInputFocused=e},setGenres:function(t,e){t.genres=e},selectGenres:function(t,e){t.selected_genres=e},disableFilters:function(t){for(var e=0,a=Object.entries(t.filters);e<a.length;e++){var n=Object(o["a"])(a[e],2),r=(n[0],n[1]);r.enabled=!1}},initFilters:function(t){for(var e={},a=["acousticness","danceability","energy","instrumentalness","liveness","speechiness","tempo","valence"],n=0,r=a;n<r.length;n++){var s=r[n];e[s]={value:null,enabled:!1}}t.filters=e},setLoggedState:function(t,e){t.logged=e},toggleDefaultPlaylist:function(t){t.isDefaultPlaylist=!t.isDefaultPlaylist}},actions:{updateResults:function(t,e){var a=t.commit;return new Promise((function(t,n){a("updateResults",e),t()}))},setFilterValuesByKey:function(t,e){var a=t.commit,n=Object(o["a"])(e,2),r=n[0],s=n[1];a("setFilterValuesByKey",{key:r,value:s})},changeFilterState:function(t,e){var a=t.commit,n=Object(o["a"])(e,2),r=n[0],s=n[1];a("changeFilterState",[r,s])},chooseActiveTrack:function(t,e){var a=t.commit;a("disableFilters"),a("selectGenres",null),a("chooseActiveTrack",e)},changeLoadingState:function(t,e){var a=t.commit;a("changeLoadingState",e)},updateRecommendations:function(t,e){var a=t.commit;a("updateRecommendations",e)},searchInputFocus:function(t,e){var a=t.commit;a("searchInputFocus",e)},setRecommendationsDataFromStore:function(t,e){var a=t.commit;a("setFilterValues",e.filters),a("chooseActiveTrack",e.active_track),a("updateRecommendations",e.recommendations),a("selectGenres",e.genres)},setGenres:function(t,e){var a=t.commit;a("setGenres",e)},selectGenres:function(t,e){var a=t.commit;a("selectGenres",e)},initFilters:function(t){var e=t.commit;e("initFilters")},setLoggedState:function(t,e){var a=t.commit;a("setLoggedState",e)},toggleDefaultPlaylist:function(t){var e=t.commit;e("toggleDefaultPlaylist")}}}),f=m,h=new Event("setUserData");function g(){return v.apply(this,arguments)}function v(){return v=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d(f);case 2:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function k(){return b.apply(this,arguments)}function b(){return b=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(window.localStorage.access_data),t.next=3,x({method:"GET",url:y+"me",headers:{Authorization:e.token_type+" "+e.access_token}}).then((function(t){var e=JSON.stringify(t.data);window.localStorage.setItem("user_data",e),window.dispatchEvent(h)}),(function(t){console.log(t)}));case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function w(t){return _.apply(this,arguments)}function _(){return _=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={},!e.path){t.next=9;break}if(n=e.path.split(/[/ & =]/gm).slice(1),"access_token"!==n[0]){t.next=9;break}return n.forEach((function(t,e){e<5&&!(e%2)&&(a[t]=n[e+1])})),window.localStorage.setItem("access_data",JSON.stringify(a)),t.next=8,k();case 8:window.close();case 9:if(window.localStorage.user_data||!window.localStorage.access_data){t.next=12;break}return t.next=12,k();case 12:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}var y="https://api.spotify.com/v1/",x=l.a.create({baseURL:y,timeout:1e3});function S(){console.log("Interceptors set"),x.interceptors.response.use((function(t){return console.log("api:",t),t}),function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(401!==e.response.status){t.next=3;break}return t.next=3,g();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){console.log("always happen")}))}var C="https://api.spotify.com/v1/",R=JSON.parse(window.localStorage.getItem("token")),$={methods:{access_data:function(){return JSON.parse(window.localStorage.access_data)},authorization_token:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(R){t.next=3;break}return t.next=3,this.getToken();case 3:return t.abrupt("return",R.token_type+" "+R.access_token);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getToken:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l()({method:"POST",url:"https://accounts.spotify.com/api/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=client_credentials"}).then((function(t){window.localStorage.setItem("token",JSON.stringify(t.data)),R=JSON.parse(window.localStorage.getItem("token"))}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),writeToken:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("undefined"!==R&&null!==R&&void 0!==R){t.next=3;break}return t.next=3,this.getToken();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSearchData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=l.a,t.t1=C+"search",t.t2={q:e,type:a},t.next=5,this.authorization_token();case 5:t.t3=t.sent,t.t4={Authorization:t.t3},t.t5={method:"GET",url:t.t1,params:t.t2,headers:t.t4},(0,t.t0)(t.t5).then((function(t){n.writeSearchResultToStorage(t.data)})).catch(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(r.response.status),401!==r.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,n.getToken();case 5:return t.next=7,n.getSearchData(e,a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),writeSearchResultToStorage:function(t){this.$store.dispatch("updateResults",t).then((function(){console.log(t)}))},getRecommendationsData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n,r,s,i,u,d,p,m,f,h=this,g=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=g.length>1&&void 0!==g[1]?g[1]:null,r="",s=0,i=Object.entries(a);s<i.length;s++)u=Object(o["a"])(i[s],2),d=u[0],p=u[1],p.enabled&&(r+="&target_"+d+"="+p.value);return m=this.$store.state.selected_genres,f="",m&&(f="&seed_genres=".concat(m.join(","))),this.$store.dispatch("changeLoadingState",{component:"recs",isLoading:!0}),t.next=9,this.writeToken();case 9:return t.t0=l.a,t.t1=C+"recommendations?seed_tracks="+e+r+"&limit=50"+f,t.next=13,this.authorization_token();case 13:return t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},t.next=18,(0,t.t0)(t.t4).then((function(t){console.log(t),n=t.data})).catch(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.response.status),401!==a.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,h.getToken();case 5:return t.next=7,h.getRecommendationsData(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){h.$store.dispatch("changeLoadingState",{component:"recs",isLoading:!1})}));case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAudioFeatures:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=null,t.next=3,this.writeToken();case 3:return t.t0=l.a,t.t1=C+"audio-features/"+e,t.next=7,this.authorization_token();case 7:return t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},t.next=12,(0,t.t0)(t.t4).then((function(t){return a=t.data,a})).catch(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.response.status),401!==a.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,n.getToken();case 5:return t.next=7,n.getAudioFeatures(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCurrentPlayback:function(){x({method:"GET",url:C+"me/player/",headers:{Authorization:this.access_data.token_type+" "+this.access_data.access_token}}).then((function(t){return console.log(t)}))},createNewPlaylist:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(window.localStorage.user_data),a=this,n=null,t.next=5,l()({method:"POST",url:C+"users/".concat(e.id,"/playlists"),headers:{Authorization:a.access_data().token_type+" "+a.access_data().access_token,"Content-Type":"application/json"},data:{name:"".concat(a.$store.state.activeTrack.name," playlist by Spotifind"),public:!0}}).then((function(t){n=t}),(function(t){401===t.response.status&&g()}));case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserPlaylists:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",l()({method:"GET",url:C+"me/playlists",headers:{Authorization:this.access_data().token_type+" "+this.access_data().access_token}}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTracksFromPlaylist:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",x({method:"GET",url:C+"playlists/".concat(e,"/tracks?fields=items(track.uri)"),headers:{Authorization:this.access_data().token_type+" "+this.access_data().access_token}}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deleteTracksFromPlaylist:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x({method:"DELETE",url:C+"playlists/".concat(e,"/tracks"),headers:{Authorization:this.access_data().token_type+" "+this.access_data().access_token,"Content-Type":"application/json"},data:{tracks:a}});case 2:console.log("deleted");case 3:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),createDefaultPlaylist:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s,o,c,u,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(window.localStorage.user_data),a=this,n=null,t.prev=3,t.next=6,this.getUserPlaylists();case 6:s=t.sent,t.next=16;break;case 9:if(t.prev=9,t.t0=t["catch"](3),401!==t.t0.response.status){t.next=16;break}return t.next=14,g();case 14:return console.log("error logon on create default playlist"),t.abrupt("return");case 16:if(r=s.data.items.filter((function(t){return"Playlist by Spotifind"===t.name})),0===r.length){t.next=30;break}return t.next=20,this.getTracksFromPlaylist(r[0].id);case 20:o=t.sent,c=[],u=Object(i["a"])(o.data.items);try{for(u.s();!(d=u.n()).done;)p=d.value,c.push(p.track)}catch(m){u.e(m)}finally{u.f()}return console.log(c),t.next=27,this.deleteTracksFromPlaylist(r[0].id,c);case 27:return t.abrupt("return",{data:r[0]});case 30:return t.next=32,l()({method:"POST",url:C+"users/".concat(e.id,"/playlists"),headers:{Authorization:a.access_data().token_type+" "+a.access_data().access_token,"Content-Type":"application/json"},data:{name:"Playlist by Spotifind",public:!0}}).then((function(t){n=t}),(function(t){401===t.response.status&&g()}));case 32:return t.abrupt("return",n);case 33:case"end":return t.stop()}}),t,this,[[3,9]])})));function e(){return t.apply(this,arguments)}return e}(),addRecommendedTracksToPlaylist:function(t){console.log("adding");var e=this.$store.state.recommendations.tracks.map((function(t){return t.uri}));return e.unshift(this.$store.state.activeTrack.uri),x({method:"POST",url:C+"playlists/".concat(t,"/tracks"),headers:{Authorization:this.access_data().token_type+" "+this.access_data().access_token,"Content-Type":"application/json"},data:{uris:e}})},createRecsPlaylist:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,!this.$store.state.isDefaultPlaylist){t.next=7;break}return t.next=4,this.createDefaultPlaylist();case 4:e=t.sent,t.next=10;break;case 7:return t.next=9,this.createNewPlaylist();case 9:e=t.sent;case 10:if(e){t.next=14;break}window.addEventListener("storage",(function(t){"access_data"===t.key&&n.createRecsPlaylist()}),{once:!0}),t.next=19;break;case 14:return t.next=16,this.addRecommendedTracksToPlaylist(e.data.id);case 16:a=t.sent,201===a.status&&(this.message="Saved to Your library"),this.loading=!1;case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTrackById:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=x,t.t1=C+"tracks/".concat(e),t.next=4,this.authorization_token();case 4:return t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},t.next=9,(0,t.t0)(t.t4).then((function(t){return t})).catch((function(t){console.error(t)}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAvailableGenres:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=l.a,t.t1=C+"recommendations/available-genre-seeds",t.next=4,this.authorization_token();case 4:t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},(0,t.t0)(t.t4).then((function(t){e.$store.dispatch("setGenres",t.data.genres)})).catch(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.response.status),401!==a.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,e.getToken();case 5:return t.next=7,e.getAvailableGenres();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},O=$,T={mixins:[O],name:"App",created:function(){window.localStorage.token||this.getToken()},mounted:function(){this.$store.state.filters||(this.getAvailableGenres(),this.$store.dispatch("initFilters"))}},j=T,P=(a("cf25"),a("2877")),I=Object(P["a"])(j,r,s,!1,null,null,null),E=I.exports,F=a("8c4f"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recommendations-wrapper"},[t.$store.state.recommendations?a("filters-block"):t._e(),a("div",{staticClass:"recommendations-list-wrapper"},[a("transition",{attrs:{name:"fade-slide",mode:"out-in"}},[!t.$store.state.recommendations||t.isLoading||t.$store.state.loading.recs?t._e():a("recommendation-list",{attrs:{tracks:t.$store.state.recommendations.tracks}})],1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isLoading||t.$store.state.loading.recs?a("loading-component"):t._e()],1)],1)],1)},A=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recommendations-list-wrapper"},[a("div",{staticClass:"recommendations-list"},t._l(t.tracks,(function(t){return a("square-card",{key:t.id,attrs:{track:t}})})),1)])},z=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"square-track-card-wrapper"},[a("div",{staticClass:"square-track-card",on:{click:function(e){return t.openInSpotify(e,t.track.uri)}}},[a("card-hover",{staticClass:"square-track-card-inner",attrs:{"image-src":t.track.album.images[1].url}}),a("div",{staticClass:"square-track-card-title"},[t._v(" "+t._s(t.track.name)+" ")]),a("div",{staticClass:"square-track-card-artists"},t._l(t.track.artists,(function(e,n){return a("span",{key:n,staticClass:"artists-item"},[t._v(" "+t._s(e.name)+t._s(n<t.track.artists.length-1?", ":"")+" ")])})),0)],1)])},G=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-lift"},[a("div",{staticClass:"tw-lift__card",style:t.backgroundStyle(t.cardColor)},[t.imageSrc?a("img",{staticClass:"tw-lift__card__image",attrs:{src:t.imageSrc}}):t._e()]),a("div",{staticClass:"tw-lift__substrate",style:t.backgroundStyle(t.substrateColor)}),a("div",{staticClass:"tw-lift__corner tw-lift__corner--top-left",style:t.cornerStyle(t.substrateColor,"right")}),a("div",{staticClass:"tw-lift__corner tw-lift__corner--bottom-right",style:t.cornerStyle(t.substrateColor,"top")})])},B=[],q=(a("99af"),{name:"CardHover",props:{substrateColor:{type:String,default:"#1db954"},cardColor:{type:String,default:"#1db954"},imageSrc:{type:String,default:null}},methods:{backgroundStyle:function(t){return"background-color: "+t},cornerStyle:function(t,e){return"border-".concat(e,"-color: ").concat(t)}}}),J=q,V=(a("7482"),Object(P["a"])(J,M,B,!1,null,"38f6b5f4",null)),H=V.exports,U={name:"squareCard",props:{track:Object},components:{CardHover:H},methods:{openInSpotify:function(t,e){window.open(e,"_self")}}},K=U,W=(a("3c52"),Object(P["a"])(K,N,G,!1,null,"551e6062",null)),Y=W.exports,Q={props:["tracks"],name:"RecommendationList",components:{SquareCard:Y}},X=Q,Z=(a("91c9"),Object(P["a"])(X,D,z,!1,null,"552b8587",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"load-wrapper"},[a("div",{staticClass:"load-icon-wrapper",style:t.circleSize(t.size)},[a("div",{staticClass:"circle load-circle",style:t.circleStyle(t.thickness,t.colorMain)}),a("div",{staticClass:"circle load-circle-part",style:t.circlePartsStyle(t.thickness,t.colorPart,t.circleParts)})])])},at=[],nt=(a("a9e3"),{name:"LoadingComponent",props:{size:{type:Number,default:30},thickness:{type:Number,default:4},colorMain:{type:String,default:"#23D460"},colorPart:{type:String,default:"#1DB954"},circleParts:{type:Array,maxLength:4,default:function(){return["right","bottom"]}}},methods:{circleSize:function(t){return"width: ".concat(t,"px; height: ").concat(t,"px;")},circleThickness:function(t){return"border-width: ".concat(t,"px;")},circlePartsColor:function(t,e){var a="";return e.forEach((function(e){a+="border-".concat(e,"-color: ").concat(t,";")})),a},circleStyle:function(t,e){return this.circleThickness(t)+"border-color: ".concat(e,";")},circlePartsStyle:function(t,e,a){return this.circleThickness(t)+this.circlePartsColor(e,a)}}}),rt=nt,st=(a("23a3"),Object(P["a"])(rt,et,at,!1,null,"61636d47",null)),it=st.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filters-wrapper"},[t.track.album?a("track-card",{staticClass:"filter-active-card",attrs:{filter_panel:!0,form:"rec",track:t.track}}):t._e(),a("div",{staticClass:"filters"},[a("div",{staticClass:"filters-grid"},[t._l(t.$store.state.filters,(function(e,n){return[a("span",{key:"name"+n,staticClass:"filter-name",class:{disabled:!e.enabled},on:{click:function(a){return t.changeFilterState(e,n)}}},[t._v(" "+t._s(n)+" ")]),a("div",{key:n,staticClass:"filters-inputs"},[a("div",{staticClass:"range-wrapper"},[a("input",{staticClass:"filter range",class:{disabled:!e.enabled},attrs:{id:"size",type:"range",min:"0",max:"tempo"===n?300:1,step:"tempo"===n?1:.01,disabled:!e.enabled},domProps:{value:e.value},on:{change:function(a){return t.filterValueChange(n,e.value,a)}}})]),a("input",{staticClass:"filter input",class:{disabled:!e.enabled,tempo:"tempo"===n,maxOne:"tempo"!==n},attrs:{disabled:!e.enabled},domProps:{value:"tempo"===n?Math.floor(Number(parseFloat(e.value))):Number(parseFloat(e.value).toFixed(2))},on:{change:function(a){return t.filterValueChange(n,e.value,a)}}})])]}))],2),a("div",{staticClass:"multiselect-wrapper"},[a("multiselect",{attrs:{placeholder:"Pick genres",value:t.$store.state.selected_genres,options:t.$store.state.genres,max:3,multiple:!0,taggable:!0,tagPlaceholder:"Not found",selectLabel:"Select",deselectLabel:"Remove",tagPosition:"bottom"},on:{input:t.selectGenres}},[a("span",{attrs:{slot:"maxElements"},slot:"maxElements"},[t._v("Max genres selected")])])],1),t.$store.state.logged?a("div",{staticClass:"save-in-same-playlist",class:{enabled:t.$store.state.isDefaultPlaylist},on:{click:t.toggleDefaultPlaylist}},[a("span",[t._v("Save to default playlist")])]):t._e(),t.$store.state.logged?a("div",{staticClass:"button_add_playlist-wrapper"},[a("button",{staticClass:"button_add_playlist",class:{loading:t.loading},attrs:{disabled:t.loading},on:{click:t.createRecsPlaylist}},[t.loading?a("loading-component",{attrs:{size:20,thickness:2,"color-main":"#6bbeec","color-part":"#2b74d2"}}):a("span",[t._v("Save")])],1)]):t._e()]),a("message-modal",{attrs:{message:t.message,timeout:2e3},on:{clearMessage:function(e){t.message=null}}})],1)},ct=[],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"track-card-wrapper",class:{sqr:"sqr"===t.form,rec:"rec"===t.form,filter_panel:t.filter_panel},on:{mousedown:function(e){"sqr"===t.form&&t.openInSpotify(e,t.track.uri)}}},[a("div",{staticClass:"track-card",class:{active:t.$route.params.trackId===t.track.id&&!t.filter_panel}},[a("div",{staticClass:"track-card-inner"},[a("div",{staticClass:"track-image-wrapper"},["rec"===t.form?a("img",{staticClass:"track-image",attrs:{src:t.track.album.images[1].url,alt:"Обложка композиции"}}):t._e(),a("div",{staticClass:"card-hover-wrapper"},["sqr"===t.form?a("card-hover",{attrs:{"image-src":t.track.album.images[1].url}}):t._e()],1)]),a("div",{staticClass:"track-info"},[a("div",{staticClass:"track-name-wrapper"},[a("span",{staticClass:"track-name"},[t._v(t._s(t.track.name))])]),a("div",{staticClass:"track-artist-wrapper"},t._l(t.track.artists,(function(e,n){return a("span",{key:e.id,staticClass:"track-artist"},[t._v(" "+t._s(e.name)+t._s(n<t.track.artists.length-1?", ":"")+" ")])})),0),"rec"===t.form?a("div",{staticClass:"track-uri-wrapper"},[a("div",{staticClass:"track-uri"},[a("img",{staticClass:"spotify-logo",attrs:{src:t.$store.state.activeTrack.id!==t.track.id||t.filter_panel?t.spotify_logo_default:t.spotify_logo_white,alt:"Open in app"}})])]):t._e()])])])])},lt=[],dt=a("0c3b"),pt=a.n(dt),mt=a("dbbb"),ft=a.n(mt),ht=a("647d"),gt=a.n(ht),vt={name:"TrackCard",components:{CardHover:H},mixins:[O],props:{track:Object,form:String,filter_panel:Boolean},data:function(){return{spotify_logo_black:ft.a,spotify_logo_white:gt.a,spotify_logo_default:pt.a}},methods:{openInSpotify:function(t,e){t.stopPropagation(),window.open(e,"_self")},openInApp:function(t){location.href=t}}},kt=vt,bt=(a("7f62"),Object(P["a"])(kt,ut,lt,!1,null,"744f772e",null)),wt=bt.exports,_t=a("8e5f"),yt=a.n(_t),xt=a("23d1"),St=a.n(xt),Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[t.visible&&t.message?a("div",{staticClass:"message-box-wrapper"},[a("div",{staticClass:"message-box"},[a("span",{staticClass:"message-box__text"},[t._v(" "+t._s(t.message)+" ")])])]):t._e()])},Rt=[],$t={name:"MessageModal",props:{message:String,timeout:Number},data:function(){return{visible:!1}},watch:{message:function(t){t&&(this.visible=!0,setTimeout(this.hide,this.timeout))}},methods:{hide:function(){this.visible=!1,this.$emit("clearMessage")}}},Ot=$t,Tt=(a("cf15"),Object(P["a"])(Ot,Ct,Rt,!1,null,"2ee026cf",null)),jt=Tt.exports,Pt={name:"FiltersBlock",components:{LoadingComponent:it,MessageModal:jt,TrackCard:wt,Multiselect:yt.a},mixins:[O],props:{track_id:String},data:function(){return{im:new St.a("decimal",{rightAlign:!1,min:0,max:1}),imTempo:new St.a("integer",{rightAlign:!1,min:0,max:300}),message:"",loading:!1,track:{}}},created:function(){var t=this;this.getTrackById(this.$route.params.trackId).then((function(e){t.track=e.data,t.$store.dispatch("chooseActiveTrack",t.track)}))},mounted:function(){this.im.mask(document.getElementsByClassName("input maxOne")),this.imTempo.mask(document.getElementsByClassName("tempo"))},methods:{filterValueChange:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("setFilterValuesByKey",[e,n.target.value]);case 2:return t.next=4,this.updateRecommendations();case 4:case"end":return t.stop()}}),t,this)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),toggleDefaultPlaylist:function(){this.$store.dispatch("toggleDefaultPlaylist")},changeFilterState:function(t,e){var a=!t.enabled;this.$store.dispatch("changeFilterState",[e,a]),this.updateRecommendations()},updateRecommendations:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRecommendationsData(this.$route.params.trackId,this.$store.state.filters);case 2:e=t.sent,this.$store.dispatch("updateRecommendations",e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectGenres:function(t){this.$store.dispatch("selectGenres",t),this.updateRecommendations()}},watch:{"$route.params.trackId":function(){var t=this;this.getTrackById(this.$route.params.trackId).then((function(e){t.track=e.data,t.$store.commit("initFilters")}))},track:function(){this.$store.dispatch("chooseActiveTrack",this.track)}}},It=Pt,Et=(a("0e18"),Object(P["a"])(It,ot,ct,!1,null,null,null)),Ft=Et.exports,Lt={name:"RecommendationsComponent",components:{FiltersBlock:Ft,LoadingComponent:it,RecommendationList:tt},props:["trackId","popularity"],mixins:[O],data:function(){return{isLoading:!0}},created:function(){var t=this;this.getRecommendations().then((function(){t.isLoading=!1}))},mounted:function(){if(window.localStorage.recommendations_data){var t=JSON.parse(window.localStorage.getItem("recommendations_data"));this.$store.dispatch("setRecommendationsDataFromStore",t).then((function(){window.localStorage.removeItem("recommendations_data"),console.log("Recs data cleared from storage")}))}},methods:{getRecommendations:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAudioFeatures(this.$route.params.trackId);case 2:e=t.sent,a=0,n=Object.entries(this.$store.state.filters);case 4:if(!(a<n.length)){t.next=11;break}return r=Object(o["a"])(n[a],2),s=r[0],r[1],t.next=8,this.$store.dispatch("setFilterValuesByKey",[s,e[s]]);case 8:a++,t.next=4;break;case 11:return t.t0=this.$store,t.next=14,this.getRecommendationsData(this.$route.params.trackId,this.$store.state.filters);case 14:return t.t1=t.sent,t.next=17,t.t0.dispatch.call(t.t0,"updateRecommendations",t.t1);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},watch:{"$route.params.trackId":function(){var t=this;this.isLoading=!0,this.getRecommendations().then((function(){t.isLoading=!1}))}}},At=Lt,Dt=(a("fa29"),Object(P["a"])(At,L,A,!1,null,"7b110e86",null)),zt=Dt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-wrapper",style:{backgroundColor:t.backgroundColor}},[n("div",{staticClass:"nav"},[n("div",{staticClass:"nav-logo",on:{click:function(e){return t.$router.push("/")}}},[t.logoIcon?n("img",{staticClass:"spotifind-logo",attrs:{src:a("a406")}}):t._e()]),n("div",{staticClass:"nav-content"},[t.searchElem?n("search-box",{staticClass:"item search-wrapper"}):t._e(),n("div",{staticClass:"auth item"},[this.$store.state.logged?n("div",{staticClass:"auth-logon"},[t.user_data&&t.user_data.images[0]?n("img",{staticClass:"auth-logon icon",attrs:{src:t.user_data.images[0].url}}):t._e()]):n("div",{staticClass:"auth-nologon",on:{click:t.redirectToAuth}},[n("img",{staticClass:"auth-nologon icon",attrs:{src:a("e458")}})])])],1)])])},Gt=[],Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-input-wrapper"},[a("input",{staticClass:"search-input",attrs:{placeholder:"Search"},domProps:{value:t.fieldData},on:{focus:function(e){return t.$store.dispatch("searchInputFocus",!0)},click:t.onClick,input:t.onInput}}),t.$store.state.foundResults&&t.$store.state.searchInputFocused&&0!==t.$store.state.foundResults.tracks.items.length?a("track-list",{staticClass:"search-track-list",attrs:{tracks:t.$store.state.foundResults.tracks.items}}):t._e()],1)},Bt=[],qt=(a("841c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"track-list-wrapper"},[a("div",{staticClass:"track-list"},[a("vue-custom-scrollbar",{staticClass:"scroll-area"},t._l(t.tracks,(function(e){return a("router-link",{key:e.id,staticClass:"track-card__link",attrs:{to:{name:"recommendations",params:{trackId:e.id}}}},[a("track-card",{staticClass:"track-list-card",class:{active:t.$route.params.trackId===e.id},attrs:{track:e,form:"rec"}})],1)})),1)],1)])}),Jt=[],Vt=a("4b70"),Ht=a.n(Vt),Ut=(a("e973"),{props:["tracks"],name:"TrackList",components:{TrackCard:wt,vueCustomScrollbar:Ht.a},computed:{activeTrack:function(){var t=this,e=this.tracks.filter((function(e){return e.id===t.$store.state.activeTrack.id}));return e[0]}}}),Kt=Ut,Wt=(a("b762"),Object(P["a"])(Kt,qt,Jt,!1,null,"646131ae",null)),Yt=Wt.exports,Qt={mixins:[O],components:{TrackList:Yt},name:"SearchBox",data:function(){return{fieldData:"",type:"track"}},watch:{fieldData:function(t){this.search(t)}},mounted:function(){var t=this;document.getElementById("app").addEventListener("click",(function(){t.$store.dispatch("searchInputFocus",!1)}))},methods:{search:function(t){console.log("res:",this.$store.state.foundResults),t?this.getSearchData(t,this.type):this.$store.dispatch("updateResults",null)},onInput:function(t){this.$store.dispatch("searchInputFocus",!0),this.fieldData=t.target.value},onClick:function(t){this.$store.dispatch("searchInputFocus",!0),t.stopPropagation()}}},Xt=Qt,Zt=(a("bbe5"),Object(P["a"])(Xt,Mt,Bt,!1,null,"33396bc8",null)),te=Zt.exports,ee={name:"NavPanel",components:{SearchBox:te},data:function(){return{user_data:null,backgroundColor:null,logoIcon:!0,searchElem:!0}},created:function(){var t=this;this.$route.meta&&(this.backgroundColor=this.$route.meta.backgroundColor,this.logoIcon=this.$route.meta.logoIcon,this.searchElem=this.$route.meta.searchElem),window.localStorage.user_data&&(this.user_data=JSON.parse(window.localStorage.user_data)),window.localStorage.access_data&&this.$store.dispatch("setLoggedState",!0),window.addEventListener("setUserData",(function(){console.log("user_data:",t.user_data),t.user_data=JSON.parse(window.localStorage.user_data)})),window.addEventListener("storage",(function(e){"access_data"===e.key&&t.$store.dispatch("setLoggedState",!0),"user_data"===e.key&&(t.user_data=JSON.parse(window.localStorage.user_data))}))},methods:{redirectToAuth:function(){g()}},watch:{"$route.meta":{handler:function(){var t,e;this.backgroundColor=this.$route.meta.backgroundColor,this.logoIcon=null===(t=this.$route.meta.logoIcon)||void 0===t||t,this.searchElem=null===(e=this.$route.meta.searchElem)||void 0===e||e,console.log("meta:",this.$route.meta)},deep:!0}}},ae=ee,ne=(a("0dc6"),Object(P["a"])(ae,Nt,Gt,!1,null,null,null)),re=ne.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page-wrapper",class:{"invisible-mobile":t.$store.state.searchInputFocused||0!==Object.keys(t.$store.state.activeTrack).length}},[t._m(0),a("div",{staticClass:"search-wrapper"},[a("search-box",{staticClass:"search-box"})],1)])},ie=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spotifind-logo__big-wrapper"},[n("img",{staticClass:"spotifind-logo__big",attrs:{src:a("a406")}})])}],oe={name:"SearchMainPage",components:{SearchBox:te},created:function(){this.$store.dispatch("chooseActiveTrack",{})}},ce=oe,ue=(a("fc09"),Object(P["a"])(ce,se,ie,!1,null,"607880ba",null)),le=ue.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-scene",{attrs:{embedded:"","vr-mode-ui":"enabled: false;",renderer:"logarithmicDepthBuffer: true;",arjs:"trackingMethod: best; debugUIEnabled: false; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;"}},[a("a-marker",{attrs:{preset:"custom",type:"pattern",url:"https://raw.githubusercontent.com/artseery/spotifind/master/public/pattern.patt",smooth:"true",smoothCount:"10",smoothTolerance:".01",smoothThreshold:"5"}},[a("a-entity",{attrs:{position:"0 0 0",scale:"0.5 0.5 0.5","gltf-model":"https://raw.githubusercontent.com/artseery/spotifind/master/public/scene/scene.gltf"}})],1),a("a-entity",{attrs:{camera:""}})],1)},pe=[],me={name:"ARImage",mounted:function(){var t=this;document.querySelector("a-scene").addEventListener("markerFound",(function(){t.$store.commit("updateMarkerState",!0)})),document.querySelector("a-scene").addEventListener("markerLost",(function(){t.$store.commit("updateMarkerState",!1)})),document.querySelector("a-scene").addEventListener("model-loaded",(function(){console.log("Model loaded")}))}},fe=me,he=(a("d285"),Object(P["a"])(fe,de,pe,!1,null,null,null)),ge=he.exports,ve=[{path:"",redirect:{name:"main"}},{path:"/",components:{default:le,navPanel:re},name:"main",meta:{backgroundColor:"transparent",logoIcon:!1,searchElem:!1}},{path:"/recommendations/:trackId",components:{default:zt,navPanel:re},name:"recommendations",meta:{backgroundColor:"black",logoIcon:!0,searchElem:!0}},{path:"/camera",components:{default:ge},name:"image"}],ke=ve,be=new F["a"]({routes:ke,mode:"hash",base:a("5f35").publicPath});be.beforeEach(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:n();case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}());var we=be;n["a"].use(F["a"]),n["a"].config.productionTip=!1,n["a"].config.ignoredElements=["a-scene","a-camera","a-box","a-image","a-assets","a-asset-item","a-entity","a-marker","a-video","a-nft"],S();var _e=new n["a"]({render:function(t){return t(E)},router:we,store:f}).$mount("#app")},"5f35":function(t,e,a){t.exports={publicPath:"/spotifind/"}},"647d":function(t,e,a){t.exports=a.p+"img/spotify_white.cc4e2784.png"},7482:function(t,e,a){"use strict";a("25fb")},"7a22":function(t,e,a){},"7ec4":function(t,e,a){},"7f62":function(t,e,a){"use strict";a("1ce8")},"91c9":function(t,e,a){"use strict";a("b1b2")},"9d2d":function(t,e,a){},a406:function(t,e,a){t.exports=a.p+"img/SpotifindLogoV3White500.7f251912.png"},a929:function(t,e,a){},afcd:function(t,e,a){},b1b2:function(t,e,a){},b762:function(t,e,a){"use strict";a("cfc7")},bbe5:function(t,e,a){"use strict";a("afcd")},cf15:function(t,e,a){"use strict";a("9d2d")},cf25:function(t,e,a){"use strict";a("fea6")},cfc7:function(t,e,a){},d285:function(t,e,a){"use strict";a("0650")},dbbb:function(t,e,a){t.exports=a.p+"img/spotify_black.830e3cb4.png"},e458:function(t,e,a){t.exports=a.p+"img/login-icon.1286e354.png"},fa29:function(t,e,a){"use strict";a("7ec4")},fc09:function(t,e,a){"use strict";a("49f5")},fea6:function(t,e,a){}});
//# sourceMappingURL=app.beb48bad.js.map